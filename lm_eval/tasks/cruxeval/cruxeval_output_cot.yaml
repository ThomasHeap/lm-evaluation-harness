include: cruxeval.yaml
task: cruxeval_output_cot
repeats: 10
metric_list:
  - metric: !function utils.pass_at_k
    aggregation: mean
    higher_is_better: true
    k: [1]
description: "You are given a Python function and an assertion containing an input to the function. Complete the assertion with a literal (no unsimplified expressions, no function calls) containing the output when executing the provided code on the given input, even if the function is incorrect or incomplete. Do NOT output any extra information. Execute the program step by step before arriving at an answer, and provide the full assertion with the correct output in [ANSWER] and [/ANSWER] tags, following the examples.\n\n[PYTHON]\ndef f(s):\n    s = s + s\n    return \"b\" + s + \"a\"\nassert f(\"hi\") == ??\n[/PYTHON]\n[THOUGHT]\nLet's execute the code step by step:\n\n1. The function f is defined, which takes a single argument s.\n2. The function is called with the argument \"hi\", so within the function, s is initially \"hi\".\n3. Inside the function, s is concatenated with itself, so s becomes \"hihi\".\n4. The function then returns a new string that starts with \"b\", followed by the value of s (which is now \"hihi\"), and ends with \"a\".\n5. The return value of the function is therefore \"bhihia\".\n[/THOUGHT]\n[ANSWER]\nassert f(\"hi\") == \"bhihia\"\n[/ANSWER]\n\n"
doc_to_text: "[PYTHON]\n{{code}}\nassert f({{input}}) == ??\n[/PYTHON]\n[THOUGHT]\n"
doc_to_target: "assert f({{input}})=={{output}}"
generation_kwargs:
  until:
    - "[/ANSWER]"
    - "</seed:think>[ANSWER]"
  max_gen_toks: 1024
  do_sample: True
  temperature: 0.2
  top_p: 0.95
filter_list:
  - name: "create_test"
    filter:
      - function: "custom"
        filter_fn: !function utils.build_predictions_output
